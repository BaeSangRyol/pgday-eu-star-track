<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>PhoneGap Day EU Workshop</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/styles.css" rel="stylesheet">



    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-72845162-1', 'auto');
        ga('send', 'pageview');

    </script>
</head>

<body>
<div class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">PhoneGap Day EU Essentials Workshop 2016</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a
                        href="https://github.com/hollyschinsky/spotify-browser"><img
                        src="images/icon-github.png" style="border: none;margin: -4px 0;height: 28px;width: 28px;"/>
                    GitHub
                    Project</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>


<div class="container">

<div class="row">

    <div class="col-xs-12 col-sm-8">
        <h1>Module 10&#58; Performance Tips</h1>
        <!--<hr/>-->
        <h3 id="performance-tip-animate-wisely-to-minimize-reflows">Performance Tip: Animate Wisely to Minimize Reflows</h3>

<h4 id="problem">Problem:</h4>
<p>Animating properties that cause a change to visibility (width/height, color, outline) or layout will trigger a reflow or repaint, which is too expensive in terms of performance for mobile browsers to handle.</p>

<h4 id="solution">Solution:</h4>
<p>Stick to animating <code class="highlighter-rouge">transform</code> and <code class="highlighter-rouge">opacity</code> properties only until mobile web browsers are more optimized and can support more frames per second.</p>

<p>A <strong>reflow</strong> computes the layout of the page.  A reflow on an element recomputes the dimensions and position of the element, and it also triggers further reflows on that element’s children, ancestors and elements that appear after it in the DOM.  Then it calls a final repaint.  Reflowing is very expensive, but unfortunately it can be triggered easily.</p>

<p>A repaint occurs when changes are made to an elements skin that changes visibility, but do not affect its layout. Examples of this include outline, visibility, or background color. Repaint is expensive because the browser must verify the visibility of all other nodes in the DOM tree. A reflow is even more critical to performance because it involves changes that affect the layout of a portion of the page (or the whole page). Reflow of an element causes the subsequent reflow of all child and ancestor elements as well as any elements following it in the DOM.</p>

<p><code class="highlighter-rouge">Source credit: http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/</code></p>

<p>For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;body&gt;
	&lt;div class=”error”&gt;
		&lt;h4&gt;My Module&lt;/h4&gt;
		&lt;p&gt;&lt;strong&gt;Error:&lt;/strong&gt;Description of the error…&lt;/p&gt;
		&lt;h5&gt;Corrective action required:&lt;/h5&gt;
		&lt;ol&gt;
			&lt;li&gt;Step one&lt;/li&gt;
			&lt;li&gt;Step two&lt;/li&gt;
		&lt;/ol&gt;
	&lt;/div&gt;
&lt;/body&gt;
</code></pre>
</div>

<p>In the HTML snippet above, a reflow on the paragraph would trigger a reflow of the <code class="highlighter-rouge">strong</code> because it is a child node. It would also cause a reflow of the ancestors (div.error and body – depending on the browser). In addition, the <code class="highlighter-rouge">h5</code> and <code class="highlighter-rouge">ol</code> would be reflowed simply because they follow that element in the DOM.</p>

<p>Reflows are expensive and are one of the main causes of slow DOM scripts, particularly on devices with low processing power, such as phones. In many cases, they are equivalent to laying out the entire page again.</p>

<h3 id="what-causes-a-reflow">What causes a reflow?</h3>
<ul>
  <li>Resizing the window</li>
  <li>Changing the font</li>
  <li>Adding or removing a stylesheet</li>
  <li>Content changes, such as a user typing text in
an input box</li>
  <li>Activation of CSS pseudo classes such as <code class="highlighter-rouge">:hover</code> (in IE the activation of the pseudo class of a sibling)</li>
  <li>Manipulating the class attribute</li>
  <li>A script manipulating the DOM</li>
  <li>Calculating <code class="highlighter-rouge">offsetWidth</code> and <code class="highlighter-rouge">offsetHeight</code></li>
  <li>Setting a property of the style attribute</li>
</ul>

<h3 id="best-practices-to-minimize-reflows">6 Best Practices to minimize reflows</h3>

<p><code class="highlighter-rouge">Source credit: http://blog.letitialew.com/post/30425074101/repaints-and-reflows-manipulating-the-dom-responsibly</code></p>

<ol>
  <li>
    <p>Avoid setting multiple inline styles; avoid setting styles individually.  These trigger a reflow for each dynamic style change.</p>
  </li>
  <li>
    <p>Use classNames of elements, and do so as low in the DOM tree as possible.<br />
Changing the class attribute lets you apply multiple styles to an element with a single reflow.  But since this reflows all the element’s children, that means you don’t want to change the class on a wrapper div if you’re only targeting its first child.</p>
  </li>
  <li>
    <p>Batch your DOM changes and perform them “offline” (e.g. detach, perform your DOM changes and then re-append).</p>
  </li>
  <li>
    <p>Avoid computing styles too often.  If you must then cache those values.</p>
  </li>
  <li>
    <p>Apply animations with <code class="highlighter-rouge">position: fixed or absolute</code> so it doesn’t affect the layout of other elements.</p>
  </li>
  <li>
    <p>Avoid table layouts, they trigger more reflows than block layouts because multiple passes must be made over the elements.</p>
  </li>
</ol>




        <!--<div class="row" style="margin-top: 30px;">-->
            <!--<div class="col-xs-12">-->
                <!--<div id="disqus_thread"></div>-->
                <!--<script type="text/javascript">-->
                    <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
                    <!--var disqus_shortname = 'salesforcedeveloperworkshop'; // required: replace example with your forum shortname-->

                    <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
                    <!--(function() {-->
                        <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                        <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                        <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
                    <!--})();-->
                <!--</script>-->
                <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
                <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
            <!--</div>-->
        <!--</div>-->


    </div>

    <div class="col-xs-12 col-sm-4 right-nav">

        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading" style="font-variant:small-caps;font-size: 18px;">Modules</div>
            <ol class="list-group">
                <li><a href="lesson1.html">Project Setup/PhoneGap Tooling</a></li>
                <li><a href="lesson2.html">App Walkthru</a></li>
                <li><a href="lesson3.html">Detecting Offline</a></li>
                <li><a href="lesson4.html">Searchbar Filter</a></li>
                <li><a href="lesson5.html">Add Swipeout Action</a></li>
                <li><a href="lesson6.html">Add Native Share Feature</a></li>
                <li><a href="lesson7.html">Making Your App Feel Native</a></li>
                <li><a href="lesson8.html">Configuring Your App</a></li>
                <li><a href="lesson9.html">Next Steps</a></li>
                <li><a href="lesson10.html">Optional: Remote Debugging</a></li>
            </ol>
            <p></p>
        </div>

<a href="https://twitter.com/share" class="twitter-share-button" data-size="large"
   data-url="http://hollyschinsky.github.io/phonegap-workshop"
   data-text="PhoneGap Tutorial #Cordova #PhoneGap">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<a href="https://twitter.com/devgirlfl" class="twitter-follow-button" data-show-count="true"
   data-size="large" data-lang="en">Follow
    @devgirlfl</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

    </div>

</div>

</div>

<div class="container">
    <div id="footer">
        <a href="http://devgirl.org"><p class="text-muted">Holly Schinsky</p></a>
    </div>
</div>


<script src="lib/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
